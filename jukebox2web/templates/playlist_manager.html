<!DOCTYPE html>
{% load staticfiles %}
<head>
    <title>Playlist Manager</title>
    <meta charset="utf-8">
    <link href='{% static 'css/jquery-ui.min.css' %}' rel="stylesheet">

    <script type="text/javascript" src='{% static "js/jquery.js" %}'></script>
    <script type="text/javascript" src='{% static "js/jquery-ui.js" %}'></script>
    <script type="text/javascript" src='{% static "js/jlayout/jquery.sizes.js" %}'></script>
    <script type="text/javascript" src='{% static "js/jlayout/jlayout.border.js" %}'></script>
    <script type="text/javascript" src='{% static "js/jlayout/jlayout.grid.js" %}'></script>
    <script type="text/javascript" src='{% static "js/jlayout/jlayout.flexgrid.js" %}'></script>
    <script type="text/javascript" src='{% static "js/jlayout/jlayout.flow.js" %}'></script>
    <script type="text/javascript" src='{% static "js/jlayout/jquery.jlayout.js" %}'></script>
    <script type="text/javascript" src='{% static "js/jukebox/music.js" %}'></script>

    <script type="text/javascript">
        jQuery(function($)
        {
            var container = $('.page_layout');
            var album_viewer = $('.album_viewer')
            var albums_list = $('.albums_list');
            var album_musics = $('.album_musics');
            var album_artwork = $('.album_artwork');

            function relayout() {
                container.layout({resize: false});
                album_musics.height('auto');
                album_artwork.height('auto');
                album_viewer.layout({resize: true});
                albums_list.layout({resize: false});
            }
            relayout();
            relayout(); //Volontaire !

            $(window).resize(relayout);

            $('.music_set_editor').layout({
                fill: 'vertical'
            });

            $( ".library_music" ).draggable({
                revert: 'invalid',
                helper: function() {
                    return $(this).clone().removeClass("library_music").addClass("dragged_music");
                },
                appendTo: $('.page_layout'),
                scroll: false,
                zIndex: 100
            });
            $( ".playlist_slot" ).droppable({
                drop: function( event, ui ) {
                    var music = ui.draggable.music('option','title');
                    $( this )
                            .addClass( "ui-state-highlight" )
                            .find( "p" )
                            .html( music );
                },
                hoverClass: "music_slot_hoovered"
            });

            $('#music1').music({
                title: 'Music 1',
                number: 1
            });

            $('#music2').music({
                title: 'Music 2',
                number: 2
            });

            $('#music3').music({
                title: 'Music 3',
                number: 3
            });

        });

    </script>

    <style>
        html, body {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            overflow: hidden;
        }

        .page_layout {
            height: 100%;
        }

        .library_col, .artists_col, .music_set_col {
            background-color: rgb(220,220,220);
            border: 1px solid rgb(200,200,200);
            display: inline-block;
        }

        .playlist_slot {
            background-color: rgb(220,220,220);
            border: 1px solid rgb(200,200,200);
            text-align: center;
            width: 200px;
            height: 60px;
            display: inline-block;
        }

        .library_music {
            background-color: rgb(35,35,35);
            border: 1px solid rgb(80,80,80);
            width: 200px;
            height: 20px;
            display: inline-block;
            z-index: 100;
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
            border-radius: 5px;
            color: #cccccc;
            padding: 5px 5px 5px 5px;
            overflow: hidden;
        }

        .library_music .hide_in_lib{
            display: none;
        }

        .music_slot_hoovered {
            background-color: rgb(200,200,200);
        }

        .artists_col {
            width: 150px;
            text-align: justify;
            display: inline-block;
            overflow: auto;
            z-index: 1;
        }

        .musics_col {
            height: 100%;
            width: auto;
            text-align: justify;
            display: inline-block;
            overflow-y: scroll;
            overflow-x: auto;
            z-index: 3;
        }

        .music_set_col {
            width: 400px;
            z-index: 2;
            overflow-y: scroll;
            overflow-x: auto;
        }

        .albums_list {
            height: auto;
            overflow: visible;
        }

        .album_viewer {
            width: 100%;
        }

        .album_title, .album_artwork, .album_musics {
            background-color: rgb(220,220,220);
            border: 1px solid rgb(200,200,200);
        }

        .album_artwork {
            width: 200px;
            height: 200px;
        }

        .album_musics {
            width: 100%;
            max-width: 100%;
            height: auto;
        }

        .album_title {
            width: 100%;
        }

        .library_col {
            overflow: auto;
        }

        .dragged_music{
            background: rgba(35, 35, 35, 0.95);
            height: 80px;
            width: 200px;
            overflow: hidden;
            -moz-box-shadow: 0px 0px 40px 2px #000000;
            -webkit-box-shadow: 0px 0px 40px 2px #000000;
            -o-box-shadow: 0px 0px 40px 2px #000000;
            box-shadow: 0px 0px 40px 2px #000000;
            filter:progid:DXImageTransform.Microsoft.Shadow(color=#000000, Direction=NaN, Strength=40);
            -moz-border-radius: 10px;
            -webkit-border-radius: 10px;
            border-radius: 10px;
        }

        .dragged_music > .music_artwork {
            float: left;
            width: 80px;
            border-right: 1px solid rgb(80,80,80);
        }

        .dragged_music > .music_infos {
            color: #cccccc;
            padding: 7px 10px 10px 85px;
            width: 100%;
        }

        .dragged_music > .music_infos > .music_title {
            font-weight: bold;
        }

        .dragged_music > .music_infos > .music_artist {
            font-style: italic;
        }

        .dragged_music > .music_infos > .music_album::before {
            content: '(';
        }

        .dragged_music > .music_infos > .music_album::after {
            content: ')';
        }

        .dragged_music .hide_in_drag{
            display: none;
        }

        .library_music > .music_infos > .music_number{
            color: rgb(100,100,100);
            display: inline-block;
        }

        .library_music > .music_infos{
            overflow: hidden;
        }

        .library_music > .music_infos > .music_title{
            display: inline-block;
            padding-left: 10px;
            background: rgb(35, 35, 35);
        }

        .library_music > .music_infos > .music_length{
            color: rgb(100,100,100);
            float: right;
            padding-left: 10px;
        }

    </style>



</head>
<body>



<div data-layout='{"type": "border", "hgap": 3, "vgap": 3}' class="page_layout">

    <div class="artists_col west">
        Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>
        Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>
        Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>Artists<br/>
    </div>

    <div class="center library_col">

        <div data-layout='{"type": "flexGrid", "columns": 1 }' class="albums_list">
            {% include "playlist_manager/album_viewer.html" %}
        </div>

    </div>

    <div class="east music_set_col">

        {% include "playlist_manager/music_set_editor.html" %}

    </div>

</div>
</body>
</html>
